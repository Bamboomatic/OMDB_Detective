(this.webpackJsonpomdb_detective=this.webpackJsonpomdb_detective||[]).push([[0],{15:function(e,t,a){e.exports=a(27)},20:function(e,t,a){},21:function(e,t,a){},27:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),i=a(14),r=a.n(i),o=(a(20),a(3)),l=a(4),c=a(6),h=a(5),m=a(2),u=a(7),d=(a(21),a(8)),v=a(9),p=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"movie"},s.a.createElement("img",{alt:"movie poster",src:this.props.movie.Poster,onError:function(e){e.target.onerror=null,e.target.src="https://www.auro-3d.com/wp-content/uploads/2016/08/no-poster-available.jpg"},className:"movie-poster"}),s.a.createElement("div",{className:"movie-description"},s.a.createElement("h2",null,this.props.movie.Title),s.a.createElement("h4",null,this.props.movie.Year),s.a.createElement("button",{className:"tooltip",id:this.props.movie.imdbID,type:"button",onClick:this.props.favAddHandler},"Add to Wishlist")))}}]),t}(s.a.Component),f=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"fav-movie"},s.a.createElement("img",{alt:"movie poster",src:this.props.fav.Poster,onError:function(e){e.target.onerror=null,e.target.src="https://www.auro-3d.com/wp-content/uploads/2016/08/no-poster-available.jpg"},className:"fav-movie-poster"}),s.a.createElement("div",{className:"fav-movie-description"},s.a.createElement("h3",null,this.props.fav.Title),s.a.createElement("h5",null,this.props.fav.Year),s.a.createElement("h5",null,s.a.createElement("b",null,"Director: "),this.props.fav.Director),s.a.createElement("h5",null,s.a.createElement("b",null,"IMDB rating: "),this.props.fav.imdbRating),s.a.createElement("h5",null,s.a.createElement("b",null,"Genre: "),this.props.fav.Genre),s.a.createElement("h5",null,s.a.createElement("b",null,"Plot: "),this.props.fav.Plot),s.a.createElement("button",{id:this.props.fav.imdbID,type:"button",onClick:this.props.favDelHandler},"Remove")))}}]),t}(s.a.Component),b=a(10),g=a.n(b),E=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(h.a)(t).call(this,e))).state={movieTitle:"",page:"",numberOfPages:"",currentID:"tt0372784",movies:[],favs:[],apikey:"baec7aa6",cookies:{},wishlistOn:!1},a.searchHandler=a.searchHandler.bind(Object(m.a)(a)),a.updateInput=a.updateInput.bind(Object(m.a)(a)),a.loadMoreHandler=a.loadMoreHandler.bind(Object(m.a)(a)),a.generateWishlist=a.generateWishlist.bind(Object(m.a)(a)),a.favAddHandler=a.favAddHandler.bind(Object(m.a)(a)),a.favDelHandler=a.favDelHandler.bind(Object(m.a)(a)),a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"updateInput",value:function(e){this.setState({movieTitle:e.target.value})}},{key:"searchHandler",value:function(e){e.preventDefault(),this.searchMovie(this.state.movieTitle),this.setState({wishlistOn:!1})}},{key:"favAddHandler",value:function(e){e.preventDefault(),console.log(e.target.id),g.a.set(e.target.id,e.target.id,{expires:7}),this.generateWishlist(),console.log(this.state.favs),console.log(this.state.movies)}},{key:"favDelHandler",value:function(e){e.preventDefault(),console.log(e.target.id),g.a.remove(e.target.id),this.generateWishlist()}},{key:"searchMovie",value:function(e){var t=this;fetch("http://www.omdbapi.com/?apikey=".concat(this.state.apikey,"&s=").concat(e)).then((function(e){return e.json()})).then((function(e){var a=e.Search,n=[];t.setState({page:2}),a.forEach((function(e){var a=s.a.createElement(p,{key:e.imdbID,movie:e,favAddHandler:t.favAddHandler,favDelHandler:t.favDelHandler});n.push(a)})),t.setState({movies:n,numberOfPages:Math.ceil(e.totalResults/10)})})).catch((function(e){return console.error(e)}))}},{key:"loadMoreHandler",value:function(){this.state.page<this.state.numberOfPages+1?this.nextPageFunc():console.log("no more movies")}},{key:"nextPageFunc",value:function(){var e=this;fetch("http://www.omdbapi.com/?apikey=".concat(this.state.apikey,"&s=").concat(this.state.movieTitle,"&page=").concat(this.state.page)).then((function(e){return e.json()})).then((function(t){console.log("click");var a=t.Search,n=[];console.log("odpowiedz z API: "+a),a.forEach((function(t){var a=s.a.createElement(p,{key:t.imdbID,movie:t,favAddHandler:e.favAddHandler,favDelHandler:e.favDelAddHandler});n.push(a)})),e.setState({movies:e.state.movies.concat(n),page:e.state.page+1})})).catch((function(e){return console.error(e)}))}},{key:"generateWishlist",value:function(){var e=this;this.setState({favs:[]}),Object.values(g.a.get()).forEach((function(t){return fetch("http://www.omdbapi.com/?apikey=".concat(e.state.apikey,"&i=").concat(t)).then((function(e){return e.json()})).then((function(a){console.log(a);var n=s.a.createElement(f,{key:t,fav:a,favAddHandler:e.favAddHandler,favDelHandler:e.favDelHandler});e.setState({favs:e.state.favs.concat(n)})})).catch((function(e){return console.error(e)}))}))}},{key:"wishlistVisibilityHandler",value:function(){this.setState({wishlistOn:!this.state.wishlistOn}),this.generateWishlist()}},{key:"render",value:function(){return s.a.createElement("div",{className:"App"},s.a.createElement("header",{className:"App-header"},s.a.createElement(d.a,{className:"icon",icon:v.b,size:"4x"}),s.a.createElement("span",null,"OMDb Detective"),s.a.createElement(d.a,{className:"icon",icon:v.a,size:"4x",onClick:this.wishlistVisibilityHandler.bind(this)})),s.a.createElement("form",{className:"search-bar",ref:"form",onSubmit:this.searchHandler},s.a.createElement("input",{className:"search-bar-input",placeholder:"Movie Title Here",onChange:this.updateInput}),s.a.createElement("button",{type:"submit"},s.a.createElement(d.a,{className:"icon",icon:v.b}))),s.a.createElement("main",{className:this.state.wishlistOn?"movies wishlistOn":"movies wishlistOf"},this.state.movies),s.a.createElement("button",{className:this.state.wishlistOn?"moreButton wishlistOn":"moreButton wishlistOf",type:"button",onClick:this.loadMoreHandler},s.a.createElement(d.a,{className:"icon-bottom",icon:v.b}),"   Load next 10"),s.a.createElement("section",{className:this.state.wishlistOn?"movies wishlistOf":"movies wishlistOn"},this.state.favs),s.a.createElement("footer",{className:"footer"}))}}]),t}(n.Component);r.a.render(s.a.createElement(E,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.ab0e4a6d.chunk.js.map